<script>
  const products = [
    {
      "name": "Bloknot",
      "title": "Блокнот",
      "price": 100.00,
      "image": "./img/Bloknot1.jpg"
    },
    {
      "name": "Bloknot",
      "title": "Блокнот",
      "price": 120.00,
      "image": "./img/Bloknot2.jpg"
    },
    {
      "name": "Bloknot",
      "title": "Блокнот",
      "price": 150.00,
      "image": "./img/Bloknot3.jpg"
    },
    {
      "name": "Bloknot",
      "title": "Блокнот",
      "price": 180.00,
      "image": "./img/Bloknot4.jpg"
    },
    {
      "name": "Bloknot",
      "title": "Блокнот",
      "price": 200.00,
      "image": "./img/Bloknot5.jpg"
    },
    {
      "name": "Pen",
      "title": "Ручка",
      "price": 15.00,
      "image": "./img/pen1.jpg"
    },
    {
      "name": "Pen",
      "title": "Ручка",
      "price": 80.00,
      "image": "./img/pen2.jpg"
    },
    {
      "name": "Pen",
      "title": "Ручка",
      "price": 95.00,
      "image": "./img/pen3.jpg"
    },
    {
      "name": "Pen",
      "title": "Ручка",
      "price": 10.00,
      "image": "./img/pen4.jpg"
    },
    {
      "name": "Pen",
      "title": "Ручка",
      "price": 30.00,
      "image": "./img/pen5.jpg"
    },
    {
      "name": "Corrector",
      "title": "Коректор",
      "price": 45.00,
      "image": "./img/Corr1.jpg"
    },
    {
      "name": "Corrector",
      "title": "Коректор",
      "price": 47.00,
      "image": "./img/Corr2.jpg"
    },
    {
      "name": "Corrector",
      "title": "Коректор",
      "price": 35.00,
      "image": "./img/Corr3.jpg"
    },
    {
      "name": "Corrector",
      "title": "Коректор",
      "price": 50.00,
      "image": "./img/Corr4.jpg"
    },
    {
      "name": "Corrector",
      "title": "Коректор",
      "price": 52.00,
      "image": "./img/Corr5.jpg"
    },
    {
      "name": "Files",
      "title": "Файли",
      "price": 152.00,
      "image": "./img/Files1.jpg"
    },
    {
      "name": "Files",
      "title": "Файли",
      "price": 87.00,
      "image": "./img/Files2.jpg"
    },
    {
      "name": "Files",
      "title": "Файли",
      "price": 95.00,
      "image": "./img/Files3.jpg"
    },
    {
      "name": "Files",
      "title": "Файли",
      "price": 100.00,
      "image": "./img/Files4.jpg"
    },
    {
      "name": "Files",
      "title": "Файли",
      "price": 120.00,
      "image": "./img/Files5.jpg"
    },
    {
      "name": "Paper",
      "title": "Папір",
      "price": 110.00,
      "image": "./img/Paper1.jpg"
    },
    {
      "name": "Paper",
      "title": "Папір",
      "price": 150.00,
      "image": "./img/Paper2.jpg"
    },
    {
      "name": "Paper",
      "title": "Папір",
      "price": 180.00,
      "image": "./img/Paper3.jpg"
    },
    {
      "name": "Paper",
      "title": "Папір",
      "price": 175.00,
      "image": "./img/Paper4.jpg"
    },
    {
      "name": "Paper",
      "title": "Папір",
      "price": 200.00,
      "image": "./img/Paper5.jpg"
    },
    {
      "name": "Scotch",
      "title": "Скотч",
      "price": 40.00,
      "image": "./img/Skotch1.jpg"
    },
    {
      "name": "Scotch",
      "title": "Скотч",
      "price": 60.00,
      "image": "./img/Skotch2.jpg"
    },
    {
      "name": "Scotch",
      "title": "Скотч",
      "price": 50.00,
      "image": "./img/Skotch3.jpg"
    },
    {
      "name": "Scotch",
      "title": "Скотч",
      "price": 75.00,
      "image": "./img/Skotch4.jpg"
    },
    {
      "name": "Scotch",
      "title": "Скотч",
      "price": 45.00,
      "image": "./img/Skotch5.jpg"
    },
    {
      "name": "Stepler",
      "title": "Степлер",
      "price": 145.00,
      "image": "./img/Stepler1.jpg"
    },
    {
      "name": "Stepler",
      "title": "Степлер",
      "price": 130.00,
      "image": "./img/Stepler2.jpg"
    },
    {
      "name": "Stepler",
      "title": "Степлер",
      "price": 155.00,
      "image": "./img/Stepler3.jpg"
    },
    {
      "name": "Stepler",
      "title": "Степлер",
      "price": 260.00,
      "image": "./img/Stepler4.jpg"
    },
    {
      "name": "Stepler",
      "title": "Степлер",
      "price": 140.00,
      "image": "./img/Stepler5.jpg"
    },
    {
      "name": "Pencil",
      "title": "Олівець",
      "price": 25.00,
      "image": "./img/pencil1.jpg"
    },
    {
      "name": "Pencil",
      "title": "Олівець",
      "price": 70.00,
      "image": "./img/pencil2.jpg"
    },
    {
      "name": "Pencil",
      "title": "Олівець",
      "price": 125.00,
      "image": "./img/pencil3.jpg"
    },
    {
      "name": "Pencil",
      "title": "Олівець",
      "price": 30.00,
      "image": "./img/pencil4.jpg"
    },
    {
      "name": "Pencil",
      "title": "Олівець",
      "price": 150.00,
      "image": "./img/pencil5.jpg"
    },
    {
      "name": "Gumka",
      "title": "Гумка",
      "price": 15.00,
      "image": "./img/Gumka1.jpg"
    },
    {
      "name": "Gumka",
      "title": "Гумка",
      "price": 10.00,
      "image": "./img/Gumka2.jpg"
    },
    {
      "name": "Gumka",
      "title": "Гумка",
      "price": 25.00,
      "image": "./img/Gumka3.jpg"
    },
    {
      "name": "Gumka",
      "title": "Гумка",
      "price": 20.00,
      "image": "./img/Gumka4.jpg"
    },
    {
      "name": "Gumka",
      "title": "Гумка",
      "price": 150.00,
      "image": "./img/Gumka5.jpg"
    },
    {
      "name": "Kreida",
      "title": "Крейда",
      "price": 50.00,
      "image": "./img/Kreida1.jpg"
    },
    {
      "name": "Kreida",
      "title": "Крейда",
      "price": 70.00,
      "image": "./img/Kreida3.jpg"
    },
    {
      "name": "Kreida",
      "title": "Крейда",
      "price": 60.00,
      "image": "./img/Kreida2.jpg"
    },
    {
      "name": "Kreida",
      "title": "Крейда",
      "price": 100.00,
      "image": "./img/Kreida4.jpg"
    },
    {
      "name": "Kreida",
      "title": "Крейда",
      "price": 5.00,
      "image": "./img/Kreida5.jpg"
    },
    {
      "name": "Marker",
      "title": "Маркер",
      "price": 50.00,
      "image": "./img/marker1.jpg"
    },
    {
      "name": "Marker",
      "title": "Маркер",
      "price": 35.00,
      "image": "./img/marker2.jpg"
    },
    {
      "name": "Marker",
      "title": "Маркер",
      "price": 25.00,
      "image": "./img/marker3.jpg"
    },
    {
      "name": "Marker",
      "title": "Маркер",
      "price": 45.00,
      "image": "./img/marker4.jpg"
    },
    {
      "name": "Marker",
      "title": "Маркер",
      "price": 30.00,
      "image": "./img/marker5.jpg"
    },
    {
      "name": "Farba",
      "title": "Фарба",
      "price": 55.00,
      "image": "./img/farba1.jpg"
    },
    {
      "name": "Farba",
      "title": "Фарба",
      "price": 100.00,
      "image": "./img/farba3.jpg"
    },
    {
      "name": "Farba",
      "title": "Фарба",
      "price": 80.00,
      "image": "./img/farba2.jpg"
    },
    {
      "name": "Farba",
      "title": "Фарба",
      "price": 170.00,
      "image": "./img/farba4.jpg"
    },
    {
      "name": "Farba",
      "title": "Фарба",
      "price": 235.00,
      "image": "./img/farba5.jpg"
    },
  ]

  // Получаем контейнер для товаров
  const productsContainer = document.getElementById("products-container");

  // Проходимся по каждому товару и создаем HTML-элемент для отображения
  products.forEach(product => {
    const productElement = document.createElement("div");
    productElement.classList.add("product");
    productElement.dataset.category = product.name;

    // Создаем элементы для отображения информации о товаре
    const titleElement = document.createElement("h2");
    titleElement.textContent = product.title;
    titleElement.style.marginBottom = "0";

    const priceElement = document.createElement("p");
    priceElement.textContent = `Ціна: ${product.price.toFixed(2)} грн.`;

    const imageElement = document.createElement("img");
    imageElement.src = product.image;
    imageElement.classList.add("product__image");
    imageElement.alt = product.title;
    imageElement.style.width = "100px";
    imageElement.style.marginInline = "20px";
    imageElement.style.marginBottom = "30px";

    // Добавляем созданные элементы к элементу товара
    productElement.appendChild(titleElement);
    productElement.appendChild(priceElement);
    productElement.appendChild(imageElement);

    // Добавляем товар к контейнеру на странице
    productsContainer.appendChild(productElement);
  });

  // Получаем все чекбоксы категорий
  const categoryCheckboxes = document.querySelectorAll('.custom-checkbox__input');

  // Получаем все товары
  const productsArr = document.querySelectorAll('.product');


  // Добавляем обработчик события для каждого чекбокса
  categoryCheckboxes.forEach(checkbox => {
    checkbox.addEventListener('change', updateProducts);
  });

  // Знаходимо кнопку "Скинути фільтри"
  const resetFiltersButton = document.querySelector('.hide-filters.btn-reset');

  // Додаємо обробник події для кнопки
  resetFiltersButton.addEventListener('click', () => {
    // Скидуємо всі вибрані чекбокси категорій
    categoryCheckboxes.forEach(checkbox => {
      checkbox.checked = false;
    });
    // Отображаем все продукты
    productsArr.forEach(product => {
      product.style.display = 'flex';
    });
  });

  // Функция для обновления отображаемых товаров в зависимости от выбранных категорий
  function updateProducts() {
    // Получаем выбранные категории
    const selectedCategories = Array.from(categoryCheckboxes)
      .filter(checkbox => checkbox.checked)
      .map(checkbox => checkbox.parentElement.dataset.text);

    // Перебираем все товары и скрываем/показываем их в зависимости от выбранных категорий
    productsArr.forEach(product => {
      const productCategory = product.dataset.category;

      if (selectedCategories.length === 0 || selectedCategories.includes(productCategory)) {
        product.style.display = 'flex';
      } else {
        product.style.display = 'none';
      }
    });
  }

  // Сортируем товары по категориям
  const sortedProducts = Array.from(products).sort((a, b) => {
    const titleA = a.dataset.category.toUpperCase();
    const titleB = b.dataset.category.toUpperCase();

    if (titleA < titleB) {
      return -1;
    }
    if (titleA > titleB) {
      return 1;
    }
    return 0;
  });

  // Очищаем контейнер перед добавлением отсортированных товаров
  productsContainer.innerHTML = '';

  // Добавляем отсортированные товары к контейнеру на странице
  sortedProducts.forEach(product => {
    productsContainer.appendChild(product);
  });

</script>
